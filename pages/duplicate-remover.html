<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>移除重复行功能 - 咪啪工具集</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- FileSaver.js -->
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <!-- 引入Inter字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- 自定义配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#6C757D',
                        success: '#28A745',
                        danger: '#DC3545',
                        warning: '#FFC107',
                        info: '#17A2B8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .file-item-hover:hover {
                @apply bg-gray-50;
            }
            .text-highlight {
                @apply bg-yellow-200 px-0.5 rounded font-semibold;
            }
            .card {
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }
            .card:hover {
                @apply transform -translate-y-1 shadow-lg;
            }
            .btn {
                transition: all 0.2s ease;
            }
            .btn:hover {
                @apply transform -translate-y-0.5;
            }
            .btn:active {
                @apply transform translate-y-0;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <header class="bg-gradient-to-r from-primary to-blue-700 text-white shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 py-4 sm:py-6 flex flex-col md:flex-row justify-between items-center">
            <a href="../index.html" class="text-2xl sm:text-3xl font-bold mb-4 md:mb-0 tracking-tight hover:text-blue-200 transition-all">
                <i class="fa fa-wrench mr-2"></i>咪啪工具集
            </a>
            <!-- 导航栏简化，只保留标题返回首页功能 -->
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 py-8 sm:py-12 flex-grow">
        <!-- 移除重复行功能 -->
        <section class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-8 sm:mb-12 card">
            <h2 class="text-xl sm:text-3xl font-bold mb-4 sm:mb-6 flex items-center text-gray-800">
                <i class="fa fa-eraser mr-3 text-primary text-2xl"></i>移除重复行
            </h2>
            
            <!-- 文本输入方式选择 -->
            <div class="mb-6">
                <div class="flex flex-wrap gap-3 mb-4">
                    <button id="textInputTab" class="px-4 py-2 bg-primary text-white rounded-l-lg hover:bg-primary/90 transition-colors btn whitespace-nowrap">
                        <i class="fa fa-paste mr-2"></i>文本粘贴
                    </button>
                    <button id="fileInputTab" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-r-lg hover:bg-gray-300 transition-colors btn whitespace-nowrap">
                        <i class="fa fa-file-o mr-2"></i>文件上传
                    </button>
                </div>
            </div>

            <!-- 文件上传方式 -->
            <div id="fileInputSection" class="mb-6">
                <label class="block text-gray-700 font-medium mb-2 sm:mb-3 text-sm sm:text-lg">选择文本文件（支持多选）</label>
                <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-3">
                    <div class="flex-1">
                        <input type="file" id="duplicateFileUpload" accept=".txt,.log,.json,.xml,.html,.js,.css,.md" multiple
                            class="block w-full text-sm text-gray-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-lg file:border-0
                            file:text-sm file:font-medium
                            file:bg-primary/10 file:text-primary
                            hover:file:bg-primary/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary" />
                    </div>
                    <button id="clearDuplicateFilesBtn" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded-lg hover:bg-gray-300 transition-colors hidden btn flex items-center justify-center whitespace-nowrap">
                        <i class="fa fa-refresh mr-2"></i>清空
                    </button>
                </div>
                <div id="duplicateFilesInfo" class="hidden p-3 bg-blue-50 rounded-lg border border-blue-100 mt-3 flex items-center font-medium">
                    <i class="fa fa-info-circle text-primary mr-2"></i>
                </div>
            </div>

            <!-- 直接粘贴方式 -->
            <div id="textInputSection" class="mb-6 hidden">
                <label class="block text-gray-700 font-medium mb-2 sm:mb-3 text-sm sm:text-lg">粘贴文本内容</label>
                <div class="mb-3 relative">
                    <!-- 行号显示区域 -->
                    <div id="directTextInputLineNumbers" style="border-right-style: dashed !important;" class="absolute left-0 top-0 bottom-0 w-12 bg-gray-50 border-t-[1px] border-l-[1px] border-b-[1px] border-r-[1px] border-t-solid border-l-solid border-b-solid border-r-dashed border-gray-300 rounded-l-lg flex flex-col items-end justify-start py-3 px-2 text-gray-400 font-mono text-sm overflow-hidden pointer-events-none"></div>
                    <!-- 文本输入区域 -->
                    <div class="relative">
                        <textarea id="directTextInput" placeholder="请在此粘贴要去重的文本内容..." rows="10"
                            class="w-full pl-16 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none font-mono text-sm resize-none whitespace-nowrap overflow-x-auto overflow-y-auto min-h-[300px] max-h-[500px] absolute inset-0 bg-transparent z-10"></textarea>
                        <div class="w-full pl-16 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none font-mono text-sm resize-none whitespace-nowrap overflow-x-auto overflow-y-auto min-h-[300px] max-h-[500px] pointer-events-none"></div>
                    </div>
                </div>
            </div>

            <!-- 处理选项和按钮容器 -->
            <div id="processingControls" class="hidden">
                <!-- 处理选项 -->
                <div class="mb-4 sm:mb-6">
                    <div class="flex flex-wrap items-center gap-4 p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="caseSensitive" checked
                                class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary" />
                            <label for="caseSensitive" class="text-sm sm:text-base text-gray-700 font-medium">区分大小写</label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="trimLines"
                                class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary" />
                            <label for="trimLines" class="text-sm sm:text-base text-gray-700 font-medium">去除行首尾空白</label>
                        </div>
                    </div>
                </div>

                <!-- 处理按钮 -->
                <div class="flex flex-wrap gap-3 mb-6">
                    <button id="removeDuplicatesBtn" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors btn whitespace-nowrap">
                        <i class="fa fa-magic mr-2"></i>移除重复行
                    </button>
                    <button id="clearTextBtn" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors btn whitespace-nowrap">
                        <i class="fa fa-refresh mr-2"></i>清空
                    </button>
                </div>
            </div>

            <!-- 验证信息区域 -->
            <div id="duplicateValidationInfo" class="hidden p-3 rounded-lg border mb-6 flex items-center font-medium">
                <i id="duplicateValidationIcon" class="mr-2"></i>
                <span id="duplicateValidationInfoText" class="text-sm sm:text-base"></span>
            </div>
            
            <!-- 处理结果 -->
            <div id="duplicateResults" class="hidden mb-6">
                <div class="flex flex-wrap items-center justify-between gap-3 mb-4">
                    <div class="flex items-center gap-3">
                        <h3 class="font-medium text-gray-700 text-lg">处理结果</h3>
                        <div class="flex gap-3">
                            <span class="text-sm text-gray-500">原始行数: <span id="originalLineCount">0</span></span>
                            <span class="text-sm text-gray-500">去重后行数: <span id="uniqueLineCount">0</span></span>
                            <span class="text-sm text-success">减少行数: <span id="reducedLineCount">0</span></span>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-3 justify-start sm:justify-end">
                        <button id="copyResultsBtn" class="px-4 py-2 bg-info text-white rounded-lg hover:bg-info/90 transition-colors btn whitespace-nowrap text-sm">
                            <i class="fa fa-copy mr-2"></i>复制
                        </button>
                        <button id="downloadDuplicatesBtn" class="px-4 py-2 bg-success text-white rounded-lg hover:bg-success/90 transition-colors btn whitespace-nowrap text-sm">
                            <i class="fa fa-download mr-2"></i>下载
                        </button>
                    </div>
                </div>
                <div class="relative">
                    <!-- 结果行号显示区域 -->
                    <div id="duplicateResultLineNumbers" style="border-right-style: dashed !important;" class="absolute left-0 top-0 bottom-0 w-12 bg-gray-50 border-t-[1px] border-l-[1px] border-b-[1px] border-r-[1px] border-t-solid border-l-solid border-b-solid border-r-dashed border-gray-300 rounded-l-lg flex flex-col items-end justify-start py-3 px-2 text-gray-400 font-mono text-sm overflow-hidden pointer-events-none"></div>
                    <!-- 结果内容区域 -->
                    <div id="duplicateResultContent" class="min-h-[300px] max-h-[500px] overflow-x-auto overflow-y-auto border border-gray-300 rounded-lg divide-y divide-gray-100 bg-gray-50 pl-16 pr-4 py-3 font-mono text-sm whitespace-pre">
                        <!-- 处理结果将动态生成 -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-6 sm:py-8">
        <div class="container mx-auto px-4 sm:px-6 text-center">
            <p class="text-sm sm:text-lg font-medium">Log分析工具 - 专注于高效的日志文件处理和搜索</p>
            <p class="mt-3 text-xs sm:text-base text-gray-300">使用 <i class="fa fa-heart text-danger"></i> 构建</p>
        </div>
    </footer>


    <!-- 引入JavaScript模块 -->
    <script src="../js/duplicate-remover.js"></script>
</body>
</html>