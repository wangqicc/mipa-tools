<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片裁切 - 咪啪工具集</title>
    <!-- 引入必要的库 -->
    <!-- Cropper.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.css">
    <!-- Cropper.js JS -->
    <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 引入Inter字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- 自定义配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#6C757D',
                        success: '#28A745',
                        danger: '#DC3545',
                        warning: '#FFC107',
                        info: '#17A2B8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .file-item-hover:hover {
                @apply bg-gray-50;
            }
            .text-highlight {
                @apply bg-yellow-200 px-0.5 rounded font-semibold;
            }
            .card {
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }
            .card:hover {
                @apply transform -translate-y-1 shadow-lg;
            }
            .btn {
                transition: all 0.2s ease;
            }
            .btn:hover {
                @apply transform -translate-y-0.5;
            }
            .btn:active {
                @apply transform translate-y-0;
            }
        }
    </style>
    <style>
        /* 图片裁切相关样式 */
        #drop-area {
            border: 2px dashed #165DFF;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        #drop-area.dragover {
            background-color: #EBF5FF;
            border-color: #0D47A1;
        }
        #image-container {
            position: relative;
            overflow: hidden;
            background-color: #F3F4F6;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');
            background-size: 16px 16px;
            background-position: center;
            border-radius: 8px;
        }
        /* 圆形裁剪模式下的特殊样式 */
        .circle-crop .cropper-view-box {
            border-radius: 50% !important;
        }
        .circle-crop .cropper-dashed {
            border-radius: 50% !important;
        }
        .circle-crop .cropper-center {
            display: none;
        }
        /* 自定义Cropper点样式，符合主题 */
        .cropper-point {
            background-color: #165DFF !important;
        }
        .cropper-point.point-se::before {
            background-color: #165DFF !important;
        }
        /* 调整点的大小和样式 */
        .cropper-point {
            height: 5px !important;
            width: 5px !important;
            opacity: 0.9 !important;
        }
        .cropper-point.point-se {
            height: 5px !important;
            width: 5px !important;
        }
        #image-preview#result-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        #result-preview .bg-gray-50 {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');
            background-size: 16px 16px;
            background-position: center;
        }
        #crop-area {
            position: absolute;
            border: 2px solid #165DFF;
            background-color: rgba(255, 255, 255, 0.3);
            cursor: move;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        }
        #crop-area.circle {
            border-radius: 50%;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        }
        .crop-handle {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: #165DFF;
            border: 2px solid white;
            border-radius: 50%;
            cursor: pointer;
        }
        .crop-handle.top-left { top: -6px; left: -6px; cursor: nwse-resize; }
        .crop-handle.top-right { top: -6px; right: -6px; cursor: nesw-resize; }
        .crop-handle.bottom-left { bottom: -6px; left: -6px; cursor: nesw-resize; }
        .crop-handle.bottom-right { bottom: -6px; right: -6px; cursor: nwse-resize; }
        .crop-handle.left { top: 50%; left: -6px; transform: translateY(-50%); cursor: ew-resize; }
        .crop-handle.right { top: 50%; right: -6px; transform: translateY(-50%); cursor: ew-resize; }
        .crop-handle.top { top: -6px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
        .crop-handle.bottom { bottom: -6px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
        .preset-btn.active {
            @apply bg-primary text-white;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <header class="bg-gradient-to-r from-primary to-blue-700 text-white shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 py-4 sm:py-6 flex flex-col md:flex-row justify-between items-center">
            <a href="../index.html" class="text-2xl sm:text-3xl font-bold mb-4 md:mb-0 tracking-tight hover:text-blue-200 transition-all">
                <i class="fa fa-wrench mr-2"></i>咪啪工具集
            </a>
            <!-- 导航栏简化，只保留标题返回首页功能 -->
        </div>
    </header>
    <main class="container mx-auto px-4 sm:px-6 py-8 sm:py-12 flex-grow">
        <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-8 card">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4">图片裁切</h1>
            <p class="text-gray-600 mb-6">支持自定义裁切和圆形裁切，支持JPG、PNG、GIF和WebP格式，提供实时预览和精确调整。</p>
            <!-- 裁切模式切换 -->
            <div class="flex flex-wrap gap-4 mb-8">
                <button id="custom-crop-btn" class="btn preset-btn active px-4 py-2 bg-primary text-white rounded-lg font-medium">
                    自定义裁切
                </button>
                <button id="circle-crop-btn" class="btn preset-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200">
                    圆形裁切
                </button>
            </div>
            <!-- 上传和裁切预览区域 -->
            <div id="drop-area" class="mb-8 text-center relative">
                <!-- 上传提示 -->
                <div id="upload-tip" class="p-4 text-center">
                    <i class="fa fa-cloud-upload text-4xl text-primary mb-4"></i>
                    <h3 class="text-lg font-medium text-gray-700 mb-2">点击选择图片或拖拽图片到此处</h3>
                    <p class="text-sm text-gray-500 mb-4">支持 JPG、PNG、GIF 和 WebP 格式，最大 10MB</p>
                    <label for="file-input" class="btn inline-block bg-primary text-white px-6 py-3 rounded-lg font-medium cursor-pointer hover:bg-blue-700">
                        <i class="fa fa-file-image-o mr-2"></i>选择图片
                    </label>
                    <input type="file" id="file-input" accept="image/*" class="hidden">
                </div>
                <!-- 裁切预览区域 - Cropper.js 需要的结构 -->
                <div id="image-container" class="w-full h-[600px] flex items-center justify-center border border-gray-200 rounded-lg overflow-hidden hidden">
                    <!-- 图片预览 - Cropper.js 会自动在这个图片上创建裁剪区域 -->
                    <img id="image-preview" src="" alt="预览图片" class="max-w-full max-h-full">
                </div>
            </div>
            <!-- 裁切设置和选项 -->
            <div id="crop-settings" class="mb-8 hidden">
                <h2 class="text-lg font-semibold text-gray-800 mb-4">裁切设置</h2>
                <!-- 精确尺寸设置 -->
                <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-sm font-medium text-gray-700 mb-3">精确尺寸</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="width-input" class="block text-sm text-gray-600 mb-1">宽度 (px)</label>
                                <input type="number" id="width-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="宽度">
                            </div>
                            <div>
                                <label for="height-input" class="block text-sm text-gray-600 mb-1">高度 (px)</label>
                                <input type="number" id="height-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="高度">
                            </div>
                        </div>
                    </div>
                    <!-- 位置设置 -->
                    <div>
                        <h3 class="text-sm font-medium text-gray-700 mb-3">位置调整</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="x-input" class="block text-sm text-gray-600 mb-1">X 坐标</label>
                                <input type="number" id="x-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="X">
                            </div>
                            <div>
                                <label for="y-input" class="block text-sm text-gray-600 mb-1">Y 坐标</label>
                                <input type="number" id="y-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Y">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 缩放控制 -->
                <div class="mb-6">
                    <h3 class="text-sm font-medium text-gray-700 mb-3">缩放控制</h3>
                    <div class="flex items-center gap-4">
                        <button id="zoom-out" class="btn px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">
                            <i class="fa fa-search-minus"></i>
                        </button>
                        <input type="range" id="zoom-slider" min="10" max="200" value="100" class="flex-grow h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <span id="zoom-value" class="text-sm font-medium text-gray-700 w-12 text-center">100%</span>
                        <button id="zoom-in" class="btn px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">
                            <i class="fa fa-search-plus"></i>
                        </button>
                    </div>
                </div>
                <!-- 操作按钮 -->
                <div class="flex flex-wrap gap-4">
                    <button id="reset-btn" class="btn px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200">
                        <i class="fa fa-refresh mr-2"></i>重置
                    </button>
                    <button id="download-btn" class="btn px-6 py-3 bg-success text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <i class="fa fa-download mr-2"></i>下载图片
                    </button>
                </div>
            </div>
            <!-- 裁切结果预览 -->
        <div id="result-preview" class="mt-8 hidden bg-white rounded-xl shadow-md p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">裁切结果预览</h2>
            <div class="flex justify-center items-center">
                <div class="bg-gray-50 p-4 rounded-lg inline-block">
                    <img id="result-image" src="" alt="裁切结果" class="max-w-full max-h-[400px] rounded-lg shadow-lg">
                </div>
            </div>
        </div>
        </div>
        <!-- 关于部分 -->
        <section id="about" class="bg-white rounded-xl shadow-md p-4 sm:p-6 card">
            <h2 class="text-xl font-bold text-gray-800 mb-4">关于图片裁切工具</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">功能特点</h3>
                    <ul class="list-disc list-inside text-gray-600 space-y-2">
                        <li>支持自定义裁切和圆形裁切</li>
                        <li>支持多种图片格式：JPG、PNG、GIF、WebP</li>
                        <li>实时预览裁切效果</li>
                        <li>精确调整尺寸、位置和缩放</li>
                        <li>提供常用尺寸预设</li>
                        <li>100% 安全，所有处理都在浏览器本地进行</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">使用说明</h3>
                    <ol class="list-decimal list-inside text-gray-600 space-y-2">
                        <li>点击或拖拽图片到上传区域</li>
                        <li>选择裁切模式：自定义或圆形</li>
                        <li>调整裁切区域大小和位置</li>
                        <li>设置精确尺寸（可选）</li>
                        <li>点击"裁切图片"按钮</li>
                        <li>预览裁切结果后点击"下载图片"</li>
                    </ol>
                </div>
            </div>
        </section>
    </main>
    <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-6 sm:py-8">
        <div class="container mx-auto px-4 sm:px-6 text-center">
            <p class="text-sm sm:text-lg font-medium">咪啪工具集 - 提供实用的在线工具</p>
            <p class="mt-3 text-xs sm:text-base text-gray-300">使用 <i class="fa fa-heart text-danger"></i> 构建</p>
        </div>
    </footer>
    <!-- 引入图片裁切脚本 -->
    <script src="../js/image-cropper.js"></script>
    <script>
        // 确保DOM加载完成后初始化ImageCropper
        document.addEventListener('DOMContentLoaded', function() {
            window.cropper = new ImageCropper();
        });
    </script>
</body>
</html>